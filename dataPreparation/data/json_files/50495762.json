{"tags": ["json", "jq"], "comments": [{"score": 1, "creation_date": 1527104312, "post_id": 50495762, "comment_id": 88005199, "body": "Try this: to_entries[] | {(.key): .value.age}"}, {"score": 0, "creation_date": 1527113183, "post_id": 50495762, "comment_id": 88009158, "body": "That works, thanks!"}, {"score": 0, "creation_date": 1527134443, "post_id": 50495762, "comment_id": 88014043, "body": "Ok, I&#39;ll write it as answer, so you can accept it ;)"}], "answers": [{"score": 0, "last_activity_date": 1527103637, "answer_id": 50496095, "question_id": 50495762, "body": "<p>Convert the object to an array of key/value pairs first; then you can iterate over that and access the key and associated value in tandem.</p>\n\n<pre><code>$ jq 'to_entries' tmp.json\n[\n  {\n    \"key\": \"john\",\n    \"value\": {\n      \"age\": 40,\n      \"nickname\": \"jo\"\n    }\n  },\n  {\n    \"key\": \"mary\",\n    \"value\": {\n      \"age\": 50,\n      \"nickname\": \"mo\"\n    }\n  }\n]\n$ jq 'to_entries[] | \"\\(.key): \\(.value.age)\"' tmp.json\n\"john: 40\"\n\"mary: 50\"\n</code></pre>\n"}, {"score": 5, "last_activity_date": 1527103848, "answer_id": 50496145, "question_id": 50495762, "body": "<p>In the particular case you mention, the following filter could be used:</p>\n\n<pre><code>to_entries[] | \"\\\"\\(.key)\\\": \\(.value.age)\"\n</code></pre>\n\n<p>Using the -r command-line option (e.g. jq -rf program.jq) with your input produces:</p>\n\n<pre><code>\"john\": 40\n\"mary\": 50\n</code></pre>\n\n<p>See also:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/48629417/recursive-extraction-of-object-values-and-parent-key-name-using-jq\">Recursive extraction of object values and parent key name using jq</a></p>\n"}, {"score": 1, "last_activity_date": 1527134547, "answer_id": 50500754, "question_id": 50495762, "body": "<p>Try this:</p>\n\n<pre><code>to_entries[] | {(.key): .value.age}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n  \"john\": 40\n}\n{\n  \"mary\": 50\n}\n</code></pre>\n"}], "is_answered": true, "answer_count": 3, "score": 2, "last_activity_date": 1527134547, "creation_date": 1527102413, "question_id": 50495762, "title": "How to use jq to extract variable keys and their values from JSON?", "body": "<p>If I have a JSON file with variable key names like this:</p>\n\n<pre><code>{   \n    \"john\": {\"age\": 40, \"nickname\": \"jo\"},\n    \"mary\": {\"age\": 50, \"nickname\": \"mo\"}\n}\n</code></pre>\n\n<p>How do I use <code>jq</code> to extract the keys with some of their values?</p>\n\n<p>Example: Extract the names and their ages:</p>\n\n<pre><code>\"john\": 40\n\"mary\": 50\n</code></pre>\n"}