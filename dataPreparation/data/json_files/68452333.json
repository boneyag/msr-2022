{"tags": ["django", "django-models", "django-views", "django-forms", "django-templates"], "comments": [{"score": 0, "creation_date": 1626773657, "post_id": 68452333, "comment_id": 120976898, "body": "what is happening?"}], "answers": [{"comments": [{"score": 0, "creation_date": 1626775326, "post_id": 68452901, "comment_id": 120977605, "body": "Ok, i changed it and redirected it to the my-history page instead, so that&#39;s solved but what about the user getting changed? Cause now that it gets edited and gets redirected, but because the user is getting changed i can no longer see any complains on the my-history page that were editted"}, {"score": 0, "creation_date": 1626775495, "post_id": 68452901, "comment_id": 120977678, "body": "what do you mean by the user getting changed?"}, {"score": 0, "creation_date": 1626775698, "post_id": 68452901, "comment_id": 120977739, "body": "in the admin panel, when I go to the complaints fields and select on the edited complaint, the user field gets automatically changed to Null. My user is AnupamaJagadi and all the unedited complaints have that stored but as soon as I edit a complaint, the user changes to ----"}, {"score": 0, "creation_date": 1626775929, "post_id": 68452901, "comment_id": 120977824, "body": "Although that is a different question, but you should add a <code>form_valid(self, form)</code> method and assign the current user to the form before saving it."}, {"score": 0, "creation_date": 1626777148, "post_id": 68452901, "comment_id": 120978293, "body": "How do I do that? Could you please show it"}, {"score": 0, "creation_date": 1626777480, "post_id": 68452901, "comment_id": 120978400, "body": "can you ask another question, it would be a bit tough to show in the comments?"}, {"score": 0, "creation_date": 1626777921, "post_id": 68452901, "comment_id": 120978555, "body": "what essentially you need to do is grab the form in the method <code>form_valid</code> and set <code>form.instance.user = self.request.user</code>."}, {"score": 0, "creation_date": 1626778481, "post_id": 68452901, "comment_id": 120978750, "body": "<a href=\"https://stackoverflow.com/questions/68453665/user-field-is-getting-changed-to-null-everytime-i-update-the-form\" title=\"user field is getting changed to null everytime i update the form\">stackoverflow.com/questions/68453665/&hellip;</a>    I asked it in a idfferent question format as well"}], "score": 0, "last_activity_date": 1626777552, "last_edit_date": 1626777552, "answer_id": 68452901, "question_id": 68452333, "body": "<p>As you can see in the error message it tells you it is trying to look for the url with a view name <code>Complaint</code> but it couldn't find one that doesn't take an argument.</p>\n<p>Your current <code>urlpattern</code> for the complaint edit takes an argument <code>pk</code> which is not being passed. Your current <code>success_url</code> is <code>reverse_lazy('Complaint')</code>, and hence you get an error.</p>\n<p>One of the workaround for this issue would be to add a method <code>get_success_url</code> in our <code>view</code> class.</p>\n<pre class=\"lang-py prettyprint-override\"><code>def get_success_url(self):\n    return reverse_lazy('Complain', args=[self.object.pk])\n</code></pre>\n"}], "is_answered": false, "answer_count": 1, "score": 0, "last_activity_date": 1626777552, "creation_date": 1626772341, "question_id": 68452333, "title": "What do I put in the success_url in my django view. Right now, this isn&#39;t saving the edited form nor redirecting the page", "body": "<p>I don't know what to use or how to use the success_url in the django views. I tried reading online but did not understand, also tried doing a few things told by others but that is not working. I am pretty sure I am doing something wrong but I don't know what and how to solve it.</p>\n<p>views.py:</p>\n<pre><code>class EditComplaint(UserPassesTestMixin, UpdateView):\nmodel = Complaint\nform_class = ComplaintForm\ntemplate_name = 'newcomplaint.html'\nsuccess_url = reverse_lazy('Complaint')\ndef get_queryset(self, *args, **kwargs):\n    return super().get_queryset(*args, **kwargs).filter(\n        user=self.request.user\n    )\n\ndef test_func(self):\n    complain = self.get_object()\n\n    if self.request.user == complain.user:\n        return True\n    raise Http404(_('This complain does not exist'))\n</code></pre>\n<p>urls.py:</p>\n<pre><code>urlpatterns = [...\npath('Complaint/&lt;int:pk&gt;/edit/', accounts.views.EditComplaint.as_view(), name='Complaint')\n]\n</code></pre>\n<p>If i do this then it is getting redirected to:</p>\n<p><a href=\"https://i.stack.imgur.com/5i7wx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5i7wx.png\" alt=\"enter image description here\" /></a></p>\n<p>and when i redirect it to the my-history page, it does not show that particular edited complaint. I thought it was deleting it so I went to the admin panel, but all my complaints are there and the changes made can also be seen but somehow the user got changed and now its set to ----.</p>\n"}