{"tags": ["python", "json", "stringio"], "answers": [{"answer_id": 67828528, "question_id": 67828476, "body": "<p>You need to use <code>fp.getvalue()</code> instead of <code>read()</code>. Note that your <code>errors</code> dictionary is already JSON-like so calling <code>json.dump()</code> somewhat clobbers the output format</p>\n<p>Try:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import json\nfrom io import StringIO\n\nerrors = [{'dateTime': '05/06/2021, 05:00PM', 'cs-username': '-', 'sc-substatus': '0', 'sc-win32-status': '0', 'sc-bytes': '34255', 'time-taken': '218', 'serverIP': '209.213.12.24', 'method': 'GET', 'file': '/ads.txt', 'errorMessage': &quot;404;https://www.fudge.com:443/ads.txt|49|800a01a8|Object_required:_'xmlDocTemp.documentElement'&quot;, 'port': '443', 'clientIP': '66.69.69.145', 'userAgent': 'Mozilla/5.0+(compatible;+Googlebot/2.1;++http://www.google.com/bot.html)', 'cookie': '-', 'referer': '-', 'statusCode': '500', 'errorHash': 'd5228f90df950647d0acdaa03ce5dc60b970a1ab0d8287ed611d6e3214d91667', 'absoluteHash': '538d59226642d818723f0f9cf1e465b9c01061daafdd79c7cbd897bceefcac1c', 'errorLogLine': 1, 'queryParams': '-'}, {'dateTime': '05/06/2021, 05:00PM', 'cs-username': '-', 'sc-substatus': '0', 'sc-win32-status': '0', 'sc-bytes': '34255', 'time-taken': '156', 'serverIP': '209.213.12.24', 'method': 'GET', 'file': '/ads.txt', 'errorMessage': &quot;404;https://www.crap.com:443/ads.txt|49|800a01a8|Object_required:_'xmlDocTemp.documentElement'&quot;, 'port': '443', 'clientIP': '69.69.69.69', 'userAgent': 'Mozilla/5.0+(compatible;+Googlebot/2.1;++http://www.google.com/bot.html)', 'cookie': '-', 'referer': '-', 'statusCode': '500', 'errorHash': 'd5228f90df950647d0acdaa03ce5dc60b970a1ab0d8287ed611d6e3214d91667', 'absoluteHash': '6763ca746c468193c53a84a4c95039e672b5592d8808b702ec3b8552b72c54eb', 'errorLogLine': 2, 'queryParams': '-'}, {'dateTime': '05/06/2021, 05:02PM', 'cs-username': '-', 'sc-substatus': '0', 'sc-win32-status': '0', 'sc-bytes': '597', 'time-taken': '187', 'serverIP': '209.212.247.227', 'method': 'HEAD', 'file': '/https:/www.shuckydarn.com/', 'errorMessage': &quot;404;https://www.fatfool.com:443/https:/www.goshdarnit.com/|49|800a01a8|Object_required:_'xmlDocTemp.documentElement'&quot;, 'port': '443', 'clientIP': '72.54.211.17', 'userAgent': 'Test+Certificate+Info', 'cookie': '-', 'referer': '-', 'statusCode': '500', 'errorHash': '2c0b5cac5730c90c5fd73f401f9196061deb59319782bf67c0f7605408fb66e0', 'absoluteHash': 'e7ea762b3a23ea79ce84c2f1c6fdb5ae4248fc7090a783a02735e42b70084689', 'errorLogLine': 3, 'queryParams': '-'}, {'dateTime': '05/06/2021, 05:03PM', 'cs-username': '-', 'sc-substatus': '0', 'sc-win32-status': '0', 'sc-bytes': '34303', 'time-taken': '187', 'serverIP': '209.213.12.24', 'method': 'GET', 'file': '/ads.txt', 'errorMessage': &quot;404;https://www.supbro.com:443/ads.txt|49|800a01a8|Object_required:_'xmlDocTemp.documentElement'&quot;, 'port': '443', 'clientIP': '54.197.11.69', 'userAgent': 'Mozilla/5.0+(compatible;+proximic;++http://www.proximic.com/info/spider.php)', 'cookie': '-', 'referer': '-', 'statusCode': '500', 'errorHash': 'd5228f90df950647d0acdaa03ce5dc60b970a1ab0d8287ed611d6e3214d91667', 'absoluteHash': '495a2444a27222883e868f1c9d410b6197f04ce4be43af85f632c35113f8b351', 'errorLogLine': 4, 'queryParams': '-'}]\nfp = StringIO()\njson.dump(errors, fp, indent=2)\n\nprint(fp.getvalue())\n</code></pre>\n<p>Outputs:</p>\n<pre><code>'[\\n  {\\n    &quot;dateTime&quot;: &quot;05/06/2021, 05:00PM&quot;,\\n    &quot;cs-username&quot;: &quot;-&quot;,\\n    &quot;sc-substatus&quot;: &quot;0&quot;,\\n    &quot;sc-win32-status&quot;: &quot;0&quot;,\\n    &quot;sc-bytes&quot;: &quot;34255&quot;,\\n    &quot;time-taken&quot;: &quot;218&quot;,\\n    &quot;serverIP&quot;: &quot;209.213.12.24&quot;,\\n    &quot;method&quot;: &quot;GET&quot;,\\n    &quot;file&quot;: &quot;/ads.txt&quot;,\\n    &quot;errorMessage&quot;: &quot;404;https://www.fudge.com:443/ads.txt|49|800a01a8|Object_required:_\\'xmlDocTemp.documentElement\\'&quot;,\\n    &quot;port&quot;: &quot;443&quot;,\\n    &quot;clientIP&quot;: &quot;66.69.69.145&quot;,\\n    &quot;userAgent&quot;: &quot;Mozilla/5.0+(compatible;+Googlebot/2.1;++http://www.google.com/bot.html)&quot;,\\n    &quot;cookie&quot;: &quot;-&quot;,\\n    &quot;referer&quot;: &quot;-&quot;,\\n    &quot;statusCode&quot;: &quot;500&quot;,\\n    &quot;errorHash&quot;: &quot;d5228f90df950647d0acdaa03ce5dc60b970a1ab0d8287ed611d6e3214d91667&quot;,\\n    &quot;absoluteHash&quot;: &quot;538d59226642d818723f0f9cf1e465b9c01061daafdd79c7cbd897bceefcac1c&quot;,\\n    &quot;errorLogLine&quot;: 1,\\n    &quot;queryParams&quot;: &quot;-&quot;\\n  },\\n  {\\n    &quot;dateTime&quot;: &quot;05/06/2021, 05:00PM&quot;,\\n    &quot;cs-username&quot;: &quot;-&quot;,\\n    &quot;sc-substatus&quot;: &quot;0&quot;,\\n    &quot;sc-win32-status&quot;: &quot;0&quot;,\\n    &quot;sc-bytes&quot;: &quot;34255&quot;,\\n    &quot;time-taken&quot;: &quot;156&quot;,\\n    &quot;serverIP&quot;: &quot;209.213.12.24&quot;,\\n    &quot;method&quot;: &quot;GET&quot;,\\n    &quot;file&quot;: &quot;/ads.txt&quot;,\\n    &quot;errorMessage&quot;: &quot;404;https://www.crap.com:443/ads.txt|49|800a01a8|Object_required:_\\'xmlDocTemp.documentElement\\'&quot;,\\n    &quot;port&quot;: &quot;443&quot;,\\n    &quot;clientIP&quot;: &quot;69.69.69.69&quot;,\\n    &quot;userAgent&quot;: &quot;Mozilla/5.0+(compatible;+Googlebot/2.1;++http://www.google.com/bot.html)&quot;,\\n    &quot;cookie&quot;: &quot;-&quot;,\\n    &quot;referer&quot;: &quot;-&quot;,\\n    &quot;statusCode&quot;: &quot;500&quot;,\\n    &quot;errorHash&quot;: &quot;d5228f90df950647d0acdaa03ce5dc60b970a1ab0d8287ed611d6e3214d91667&quot;,\\n    &quot;absoluteHash&quot;: &quot;6763ca746c468193c53a84a4c95039e672b5592d8808b702ec3b8552b72c54eb&quot;,\\n    &quot;errorLogLine&quot;: 2,\\n    &quot;queryParams&quot;: &quot;-&quot;\\n  },\\n  {\\n    &quot;dateTime&quot;: &quot;05/06/2021, 05:02PM&quot;,\\n    &quot;cs-username&quot;: &quot;-&quot;,\\n    &quot;sc-substatus&quot;: &quot;0&quot;,\\n    &quot;sc-win32-status&quot;: &quot;0&quot;,\\n    &quot;sc-bytes&quot;: &quot;597&quot;,\\n    &quot;time-taken&quot;: &quot;187&quot;,\\n    &quot;serverIP&quot;: &quot;209.212.247.227&quot;,\\n    &quot;method&quot;: &quot;HEAD&quot;,\\n    &quot;file&quot;: &quot;/https:/www.shuckydarn.com/&quot;,\\n    &quot;errorMessage&quot;: &quot;404;https://www.fatfool.com:443/https:/www.goshdarnit.com/|49|800a01a8|Object_required:_\\'xmlDocTemp.documentElement\\'&quot;,\\n    &quot;port&quot;: &quot;443&quot;,\\n    &quot;clientIP&quot;: &quot;72.54.211.17&quot;,\\n    &quot;userAgent&quot;: &quot;Test+Certificate+Info&quot;,\\n    &quot;cookie&quot;: &quot;-&quot;,\\n    &quot;referer&quot;: &quot;-&quot;,\\n    &quot;statusCode&quot;: &quot;500&quot;,\\n    &quot;errorHash&quot;: &quot;2c0b5cac5730c90c5fd73f401f9196061deb59319782bf67c0f7605408fb66e0&quot;,\\n    &quot;absoluteHash&quot;: &quot;e7ea762b3a23ea79ce84c2f1c6fdb5ae4248fc7090a783a02735e42b70084689&quot;,\\n    &quot;errorLogLine&quot;: 3,\\n    &quot;queryParams&quot;: &quot;-&quot;\\n  },\\n  {\\n    &quot;dateTime&quot;: &quot;05/06/2021, 05:03PM&quot;,\\n    &quot;cs-username&quot;: &quot;-&quot;,\\n    &quot;sc-substatus&quot;: &quot;0&quot;,\\n    &quot;sc-win32-status&quot;: &quot;0&quot;,\\n    &quot;sc-bytes&quot;: &quot;34303&quot;,\\n    &quot;time-taken&quot;: &quot;187&quot;,\\n    &quot;serverIP&quot;: &quot;209.213.12.24&quot;,\\n    &quot;method&quot;: &quot;GET&quot;,\\n    &quot;file&quot;: &quot;/ads.txt&quot;,\\n    &quot;errorMessage&quot;: &quot;404;https://www.supbro.com:443/ads.txt|49|800a01a8|Object_required:_\\'xmlDocTemp.documentElement\\'&quot;,\\n    &quot;port&quot;: &quot;443&quot;,\\n    &quot;clientIP&quot;: &quot;54.197.11.69&quot;,\\n    &quot;userAgent&quot;: &quot;Mozilla/5.0+(compatible;+proximic;++http://www.proximic.com/info/spider.php)&quot;,\\n    &quot;cookie&quot;: &quot;-&quot;,\\n    &quot;referer&quot;: &quot;-&quot;,\\n    &quot;statusCode&quot;: &quot;500&quot;,\\n    &quot;errorHash&quot;: &quot;d5228f90df950647d0acdaa03ce5dc60b970a1ab0d8287ed611d6e3214d91667&quot;,\\n    &quot;absoluteHash&quot;: &quot;495a2444a27222883e868f1c9d410b6197f04ce4be43af85f632c35113f8b351&quot;,\\n    &quot;errorLogLine&quot;: 4,\\n    &quot;queryParams&quot;: &quot;-&quot;\\n  }\\n]'\n</code></pre>\n<p><strong>UPDATE</strong>:</p>\n<p>If your goal is a <code>dataframe</code> from <code>errors</code> just do this:</p>\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame(errors)\n</code></pre>\n"}], "is_answered": true, "answer_count": 1, "last_activity_date": 1622753860, "question_id": 67828476, "title": "Unable to read StringIO object created by json.dump()", "body": "<p>I am trying to write a list of dictionaries to a <code>StringIO</code> object with <code>json.dump()</code> in Python 3. The objective is to create a pandas dataframe from a JSON &quot;file&quot; without actually saving it to disk. I can't seem to read anything from the <code>StringIO</code> object. My code is as follows:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import json\nfrom io import StringIO\n\nerrors = [{'dateTime': '05/06/2021, 05:00PM', 'cs-username': '-', 'sc-substatus': '0', 'sc-win32-status': '0', 'sc-bytes': '34255', 'time-taken': '218', 'serverIP': '209.213.12.24', 'method': 'GET', 'file': '/ads.txt', 'errorMessage': &quot;404;https://www.fudge.com:443/ads.txt|49|800a01a8|Object_required:_'xmlDocTemp.documentElement'&quot;, 'port': '443', 'clientIP': '66.69.69.145', 'userAgent': 'Mozilla/5.0+(compatible;+Googlebot/2.1;++http://www.google.com/bot.html)', 'cookie': '-', 'referer': '-', 'statusCode': '500', 'errorHash': 'd5228f90df950647d0acdaa03ce5dc60b970a1ab0d8287ed611d6e3214d91667', 'absoluteHash': '538d59226642d818723f0f9cf1e465b9c01061daafdd79c7cbd897bceefcac1c', 'errorLogLine': 1, 'queryParams': '-'}, {'dateTime': '05/06/2021, 05:00PM', 'cs-username': '-', 'sc-substatus': '0', 'sc-win32-status': '0', 'sc-bytes': '34255', 'time-taken': '156', 'serverIP': '209.213.12.24', 'method': 'GET', 'file': '/ads.txt', 'errorMessage': &quot;404;https://www.crap.com:443/ads.txt|49|800a01a8|Object_required:_'xmlDocTemp.documentElement'&quot;, 'port': '443', 'clientIP': '69.69.69.69', 'userAgent': 'Mozilla/5.0+(compatible;+Googlebot/2.1;++http://www.google.com/bot.html)', 'cookie': '-', 'referer': '-', 'statusCode': '500', 'errorHash': 'd5228f90df950647d0acdaa03ce5dc60b970a1ab0d8287ed611d6e3214d91667', 'absoluteHash': '6763ca746c468193c53a84a4c95039e672b5592d8808b702ec3b8552b72c54eb', 'errorLogLine': 2, 'queryParams': '-'}, {'dateTime': '05/06/2021, 05:02PM', 'cs-username': '-', 'sc-substatus': '0', 'sc-win32-status': '0', 'sc-bytes': '597', 'time-taken': '187', 'serverIP': '209.212.247.227', 'method': 'HEAD', 'file': '/https:/www.shuckydarn.com/', 'errorMessage': &quot;404;https://www.fatfool.com:443/https:/www.goshdarnit.com/|49|800a01a8|Object_required:_'xmlDocTemp.documentElement'&quot;, 'port': '443', 'clientIP': '72.54.211.17', 'userAgent': 'Test+Certificate+Info', 'cookie': '-', 'referer': '-', 'statusCode': '500', 'errorHash': '2c0b5cac5730c90c5fd73f401f9196061deb59319782bf67c0f7605408fb66e0', 'absoluteHash': 'e7ea762b3a23ea79ce84c2f1c6fdb5ae4248fc7090a783a02735e42b70084689', 'errorLogLine': 3, 'queryParams': '-'}, {'dateTime': '05/06/2021, 05:03PM', 'cs-username': '-', 'sc-substatus': '0', 'sc-win32-status': '0', 'sc-bytes': '34303', 'time-taken': '187', 'serverIP': '209.213.12.24', 'method': 'GET', 'file': '/ads.txt', 'errorMessage': &quot;404;https://www.supbro.com:443/ads.txt|49|800a01a8|Object_required:_'xmlDocTemp.documentElement'&quot;, 'port': '443', 'clientIP': '54.197.11.69', 'userAgent': 'Mozilla/5.0+(compatible;+proximic;++http://www.proximic.com/info/spider.php)', 'cookie': '-', 'referer': '-', 'statusCode': '500', 'errorHash': 'd5228f90df950647d0acdaa03ce5dc60b970a1ab0d8287ed611d6e3214d91667', 'absoluteHash': '495a2444a27222883e868f1c9d410b6197f04ce4be43af85f632c35113f8b351', 'errorLogLine': 4, 'queryParams': '-'}]\nfp = StringIO()\njson.dump(errors, fp, indent=2)\n\nprint(fp.read())\n</code></pre>\n<p>I expect it to print something like this:</p>\n<pre><code>[\n  {\n    &quot;dateTime&quot;: &quot;05/06/2021, 05:00PM&quot;,\n    &quot;cs-username&quot;: &quot;-&quot;,\n    &quot;sc-substatus&quot;: &quot;0&quot;,\n    &quot;sc-win32-status&quot;: &quot;0&quot;,\n    &quot;sc-bytes&quot;: &quot;34255&quot;,\n    &quot;time-taken&quot;: &quot;218&quot;,\n    &quot;serverIP&quot;: &quot;209.213.12.24&quot;,\n    &quot;method&quot;: &quot;GET&quot;,\n    &quot;file&quot;: &quot;/ads.txt&quot;,\n    &quot;errorMessage&quot;: &quot;404;https://www.fudge.com:443/ads.txt|49|800a01a8|Object_required:_'xmlDocTemp.documentElement'&quot;,\n    &quot;port&quot;: &quot;443&quot;,\n    &quot;clientIP&quot;: &quot;66.69.69.145&quot;,\n    &quot;userAgent&quot;: &quot;Mozilla/5.0+(compatible;+Googlebot/2.1;++http://www.google.com/bot.html)&quot;,\n    &quot;cookie&quot;: &quot;-&quot;,\n    &quot;referer&quot;: &quot;-&quot;,\n    &quot;statusCode&quot;: &quot;500&quot;,\n    &quot;errorHash&quot;: &quot;d5228f90df950647d0acdaa03ce5dc60b970a1ab0d8287ed611d6e3214d91667&quot;,\n    &quot;absoluteHash&quot;: &quot;538d59226642d818723f0f9cf1e465b9c01061daafdd79c7cbd897bceefcac1c&quot;,\n    &quot;errorLogLine&quot;: 1,\n    &quot;queryParams&quot;: &quot;-&quot;\n  },\n  {\n    &quot;dateTime&quot;: &quot;05/06/2021, 05:00PM&quot;,\n    &quot;cs-username&quot;: &quot;-&quot;,\n    &quot;sc-substatus&quot;: &quot;0&quot;,\n    &quot;sc-win32-status&quot;: &quot;0&quot;,\n    &quot;sc-bytes&quot;: &quot;34255&quot;,\n    &quot;time-taken&quot;: &quot;156&quot;,\n    &quot;serverIP&quot;: &quot;209.213.12.24&quot;,\n    &quot;method&quot;: &quot;GET&quot;,\n    &quot;file&quot;: &quot;/ads.txt&quot;,\n    &quot;errorMessage&quot;: &quot;404;https://www.crap.com:443/ads.txt|49|800a01a8|Object_required:_'xmlDocTemp.documentElement'&quot;,\n    &quot;port&quot;: &quot;443&quot;,\n    &quot;clientIP&quot;: &quot;69.69.69.69&quot;,\n    &quot;userAgent&quot;: &quot;Mozilla/5.0+(compatible;+Googlebot/2.1;++http://www.google.com/bot.html)&quot;,\n    &quot;cookie&quot;: &quot;-&quot;,\n    &quot;referer&quot;: &quot;-&quot;,\n    &quot;statusCode&quot;: &quot;500&quot;,\n    &quot;errorHash&quot;: &quot;d5228f90df950647d0acdaa03ce5dc60b970a1ab0d8287ed611d6e3214d91667&quot;,\n    &quot;absoluteHash&quot;: &quot;6763ca746c468193c53a84a4c95039e672b5592d8808b702ec3b8552b72c54eb&quot;,\n    &quot;errorLogLine&quot;: 2,\n    &quot;queryParams&quot;: &quot;-&quot;\n  },\n  {\n    &quot;dateTime&quot;: &quot;05/06/2021, 05:02PM&quot;,\n    &quot;cs-username&quot;: &quot;-&quot;,\n    &quot;sc-substatus&quot;: &quot;0&quot;,\n    &quot;sc-win32-status&quot;: &quot;0&quot;,\n    &quot;sc-bytes&quot;: &quot;597&quot;,\n    &quot;time-taken&quot;: &quot;187&quot;,\n    &quot;serverIP&quot;: &quot;209.212.247.227&quot;,\n    &quot;method&quot;: &quot;HEAD&quot;,\n    &quot;file&quot;: &quot;/https:/www.shuckydarn.com/&quot;,\n    &quot;errorMessage&quot;: &quot;404;https://www.fatfool.com:443/https:/www.goshdarnit.com/|49|800a01a8|Object_required:_'xmlDocTemp.documentElement'&quot;,\n    &quot;port&quot;: &quot;443&quot;,\n    &quot;clientIP&quot;: &quot;72.54.211.17&quot;,\n    &quot;userAgent&quot;: &quot;Test+Certificate+Info&quot;,\n    &quot;cookie&quot;: &quot;-&quot;,\n    &quot;referer&quot;: &quot;-&quot;,\n    &quot;statusCode&quot;: &quot;500&quot;,\n    &quot;errorHash&quot;: &quot;2c0b5cac5730c90c5fd73f401f9196061deb59319782bf67c0f7605408fb66e0&quot;,\n    &quot;absoluteHash&quot;: &quot;e7ea762b3a23ea79ce84c2f1c6fdb5ae4248fc7090a783a02735e42b70084689&quot;,\n    &quot;errorLogLine&quot;: 3,\n    &quot;queryParams&quot;: &quot;-&quot;\n  },\n  {\n    &quot;dateTime&quot;: &quot;05/06/2021, 05:03PM&quot;,\n    &quot;cs-username&quot;: &quot;-&quot;,\n    &quot;sc-substatus&quot;: &quot;0&quot;,\n    &quot;sc-win32-status&quot;: &quot;0&quot;,\n    &quot;sc-bytes&quot;: &quot;34303&quot;,\n    &quot;time-taken&quot;: &quot;187&quot;,\n    &quot;serverIP&quot;: &quot;209.213.12.24&quot;,\n    &quot;method&quot;: &quot;GET&quot;,\n    &quot;file&quot;: &quot;/ads.txt&quot;,\n    &quot;errorMessage&quot;: &quot;404;https://www.supbro.com:443/ads.txt|49|800a01a8|Object_required:_'xmlDocTemp.documentElement'&quot;,\n    &quot;port&quot;: &quot;443&quot;,\n    &quot;clientIP&quot;: &quot;54.197.11.69&quot;,\n    &quot;userAgent&quot;: &quot;Mozilla/5.0+(compatible;+proximic;++http://www.proximic.com/info/spider.php)&quot;,\n    &quot;cookie&quot;: &quot;-&quot;,\n    &quot;referer&quot;: &quot;-&quot;,\n    &quot;statusCode&quot;: &quot;500&quot;,\n    &quot;errorHash&quot;: &quot;d5228f90df950647d0acdaa03ce5dc60b970a1ab0d8287ed611d6e3214d91667&quot;,\n    &quot;absoluteHash&quot;: &quot;495a2444a27222883e868f1c9d410b6197f04ce4be43af85f632c35113f8b351&quot;,\n    &quot;errorLogLine&quot;: 4,\n    &quot;queryParams&quot;: &quot;-&quot;\n  }\n]\n</code></pre>\n<p>But instead it prints nothing. Why can't I read the data from <code>json.dump()</code> with <code>fp.read()</code>? It's probably something simple that I'm missing. Any help is appreciated!</p>\n"}