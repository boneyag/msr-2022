{"tags": ["python", "django"], "answers": [{"comments": [{"score": 0, "creation_date": 1498141379, "post_id": 44698406, "comment_id": 76387092, "body": "Thank your answerPython but we shouldn&#39;t use return while using get, if we did it we&#39;ll get a SyntaxError: (\u201c&#39;return&#39; with argument inside generator\u201d,)"}], "score": 0, "last_activity_date": 1498131675, "answer_id": 44698406, "question_id": 44698336, "body": "<p>Might you have forgot to return <code>response</code> from view</p>\n\n<pre><code>return Response({\"line\": line})\n</code></pre>\n"}, {"comments": [{"score": 0, "creation_date": 1498142334, "post_id": 44698770, "comment_id": 76387903, "body": "for the view : class executView(TemplateView):     template_name = &#39;execut.html&#39;          def get_context_data(self, **kwargs):         context = super(executView, self).get_context_data(**kwargs)         context[&#39;list&#39;]  = subprocess.check_output(&quot;./wtm.sh&quot;, stderr=subprocess.STDOUT, shell=True)         return context  and for the html :  &lt;html&gt; &lt;head&gt;   &lt;title&gt; Response &lt;/title&gt; &lt;/head&gt; &lt;body&gt;   {% for element in list %}   &lt;p&gt; {{ element }} &lt;/p&gt;   {% endfor %} &lt;/body&gt; &lt;/html&gt;"}, {"score": 0, "creation_date": 1498142393, "post_id": 44698770, "comment_id": 76387950, "body": "Thank you for your answer, i use yield because i want to see the process of the execution of the script because it takes a while to complete. I modified my code using get_context_data and it works."}], "score": 1, "last_activity_date": 1498133513, "last_edit_date": 1498133513, "answer_id": 44698770, "question_id": 44698336, "body": "<p>Firstly, you are not using anything from DRF here, just plain Django.</p>\n\n<p>Secondly, a view in Django (or any other framework) is not by itself a WSGI application. There is no point defining an <code>application()</code> method, as the view will never call it. </p>\n\n<p>Finally, you can't use yield to return an iterator, but at the same time expect to render a template.  A template is rendered in one go, so you need to have all the data for the template.</p>\n\n<p>Rather than yielding line by line, you should return all the response at once, in a single list variable. You should do this within a <code>get_context_data</code> method, which returns a dict containing that list. Then, in your template, you would iterate over that list.</p>\n"}], "is_answered": true, "answer_count": 2, "score": 1, "last_activity_date": 1498133513, "creation_date": 1498131469, "question_id": 44698336, "title": "how to print the result of a bash script on a webpage using django rest framework", "body": "<p>i'm new to django (DRF), i want to print the result of a script \"myscript.sh\" using a view and a template.\nI tried the following but it doesn't work :</p>\n\n<p>In myapp/views.py :</p>\n\n<pre><code>class TestView(TemplateView):\n  template_name = 'index.html'\n  def application(environ, start_response):\n      start_response('200 OK', [('Content-Type', 'text/plain')])\n      proc = subprocess.Popen(\"./myscript.sh\", shell=True, stdout=subprocess.PIPE)\n      line = proc.stdout.readline()\n      while line:\n          yield line\n          line = proc.stdout.readline()\n</code></pre>\n\n<p>In myapp/templates/index.html:</p>\n\n<pre><code>&lt;html&gt;\n      &lt;head&gt;\n            &lt;title&gt; Lines &lt;/title&gt;\n      &lt;/head&gt;\n      &lt;body&gt;\n          &lt;p&gt; {{ line }} &lt;/p&gt;\n      &lt;/body&gt;\n &lt;/html&gt;\n</code></pre>\n"}