{"tags": ["python", "django"], "comments": [{"score": 0, "creation_date": 1516609833, "post_id": 48377338, "comment_id": 83741425, "body": "I&#39;m not sure what you are asking. Could you clarify further?"}, {"score": 0, "creation_date": 1516610607, "post_id": 48377338, "comment_id": 83741806, "body": "@ddg the file that is saved has a name like test_somehash.jpg, but here i only get test.jpg, i mean that hash prefix appears and this is what i want to get in the code"}, {"score": 0, "creation_date": 1516611501, "post_id": 48377338, "comment_id": 83742200, "body": "If you want a list of local files do <code>os.listdir()</code>, or first <code>os.chdir(&quot;Users&#47;Me&#47;Project&#47;Images&quot;)</code>. Maybe you can look through this list and find what you want?"}, {"score": 0, "creation_date": 1516611696, "post_id": 48377338, "comment_id": 83742309, "body": "@ddg if I list them, but how can I detect the file with the hash that was already created?"}, {"score": 0, "creation_date": 1516612128, "post_id": 48377338, "comment_id": 83742555, "body": "So when you get a new file name <code>test.jpg</code>, you want to check if you already have a file named something like <code>test_12341234.jpg</code> or <code>test_34234245.jpg</code>? You then want the number from that saved file?"}, {"score": 0, "creation_date": 1516612338, "post_id": 48377338, "comment_id": 83742688, "body": "@ddg yes and there may many of them, i need to find the right one"}], "answers": [{"comments": [{"score": 0, "creation_date": 1516612442, "post_id": 48377970, "comment_id": 83742746, "body": "and which one contains the final name, from the above objects: (self, request, obj, form, change)? also are the file saved before or after this handler works?"}, {"score": 0, "creation_date": 1516613144, "post_id": 48377970, "comment_id": 83743154, "body": "Your instance is <code>obj</code>, so you want <code>obj.&lt;name_of_your_filefield&gt;.name</code> - but <b>after</b> the call to <code>save_model()</code>. FWIW this is documented <i>and</i> you can browse the source code too."}, {"score": 0, "creation_date": 1516613866, "post_id": 48377970, "comment_id": 83743548, "body": "and last question what is the last handler after save_model? cause using obj.file.name - again i get the original name, and the file isn&#39;t loaded yet, so looks like i am using the wrong handler right?"}, {"score": 0, "creation_date": 1516614579, "post_id": 48377970, "comment_id": 83743941, "body": "<code>save_model</code>  definitly should save the file and update the filefield. Can you post a MCVE please ?"}], "score": 1, "last_activity_date": 1516612157, "answer_id": 48377970, "question_id": 48377338, "body": "<p>The \"_somehash\" part is added by your project's <a href=\"https://docs.djangoproject.com/en/2.0/ref/files/storage/\" rel=\"nofollow noreferrer\">filestorage</a> when he sees there's already a file by the same name in the destination directory. This happens when the model instance is saved, so if all you need is to read the \"final\" name, you can get it from <a href=\"https://docs.djangoproject.com/en/2.0/ref/models/fields/#django.db.models.fields.files.FieldFile.name\" rel=\"nofollow noreferrer\">your (saved) model field's <code>.name</code> attribute</a> (I assume you use a FileField of course).</p>\n"}], "is_answered": true, "answer_count": 1, "score": 0, "last_activity_date": 1516612295, "creation_date": 1516609636, "question_id": 48377338, "title": "updated file name in django", "body": "<p>This is an admin form handler, for example I upload a <code>test.txt</code> file in the django admin panel:</p>\n\n<pre><code>def save_model(self, request, obj, form, change):\n    if 'file' in form.changed_data:\n        print(\"file has changed: \")\n        print(obj.file)\n    else:\n        print(\"file has not changed\")\n    super(FileAdmin, self).save_model(request, obj, form, change)\n</code></pre>\n\n<p>here I get the original file name from the upload form, but by fact the file is saved with another name if there is already a file with this name, but in the above code i get only the original name in all cases, how to can I get the changed/updated file name that was saved?..</p>\n"}