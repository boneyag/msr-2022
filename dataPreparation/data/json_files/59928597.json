{"tags": ["python", "django", "django-forms", "django-admin", "django-related-manager"], "comments": [{"score": 0, "creation_date": 1580119362, "post_id": 59928597, "comment_id": 105979662, "body": "Isn&#39;t <a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-objects\" rel=\"nofollow noreferrer\">django forms</a> is not what you are looking for? Specifically <a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_manytomany\" rel=\"nofollow noreferrer\">this</a> method."}, {"score": 0, "creation_date": 1580119848, "post_id": 59928597, "comment_id": 105979927, "body": "No, I want to open a new tab when &#39;+&#39; is clicked instead of a popup. Everything else is working fine. And this is required because another person working on the same project reported that the popups are by default not opening above the main window, instead they open behind the main window. Could be a browser specific issue but this is what he requested."}], "answers": [{"comments": [{"score": 0, "creation_date": 1581313059, "post_id": 59972472, "comment_id": 106375755, "body": "I implemented this using jquery(in my admin.js file) without modifying the change_form HTML and removed &#39;related-widget-wrapper-link&#39; class. Working great. However, after submitting the form blank white page returned. Now looking for how to fix this(close the tab after submitting)."}], "score": 2, "last_activity_date": 1580318648, "answer_id": 59972472, "question_id": 59928597, "body": "<p>To open related fields <code>+Add</code> button in a new tab, you have to set <code>target=\"_blank\"</code> attribute for all those links. </p>\n\n<p>Override <code>admin/change_form.html</code> from your admin.</p>\n\n<pre><code>class BookAdmin(admin.ModelAdmin):\n    add_form_template = 'book/admin/change_form.html'\n</code></pre>\n\n<p>In the html, set the required attribute and remove </p>\n\n<pre><code>{% extends 'admin/change_form.html' %}\n\n{% load static %}\n\n\n{% block admin_change_form_document_ready %}\n    {{ block.super }}\n\n    &lt;script type=\"text/javascript\"&gt;\n    (function($) {\n        $(document).ready(function() {\n            classes = document.getElementsByClassName('add-related');\n            for (i=0; i&lt;classes.length; i++) {\n                // set target to blank\n                classes[i].setAttribute('target', '_blank');\n                // remove the class to prevent django listeners overriding click on link\n                classes[i].classList.remove(\"related-widget-wrapper-link\");\n            };\n\n        });\n    })(django.jQuery);\n    &lt;/script&gt;\n{% endblock %}\n</code></pre>\n\n<p>Now when you click on related fields, it will open in a new tab. </p>\n\n<p>An alternate option is to use <a href=\"https://docs.djangoproject.com/en/3.0/ref/contrib/admin/#using-generic-relations-as-an-inline\" rel=\"nofollow noreferrer\">inline admin as mentioned here in docs</a>.</p>\n"}], "is_answered": true, "answer_count": 1, "score": 0, "last_activity_date": 1580318648, "creation_date": 1580118598, "question_id": 59928597, "title": "Overriding Django Admin&#39;s &quot;add&quot; button for related fields", "body": "<p>I've been trying to override the functioning of +(add) button for related fields in Django admin to <strong>open a new tab</strong> instead of a popup. I looked at the <a href=\"https://github.com/django/django/blob/e348ab0d4382b0d7cb0cab9d1261c916c3d0ce6c/django/contrib/admin/static/admin/js/admin/RelatedObjectLookups.js\" rel=\"nofollow noreferrer\">RelatedObjectLookup.js</a> to see how it works but still stuck at implementing the same functioning by opening a new tab. Is there any way to implement such a thing or to render the form '<strong>inline</strong>'?</p>\n"}