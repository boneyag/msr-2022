{"tags": ["android", "json"], "comments": [{"score": 0, "creation_date": 1459778062, "post_id": 36404532, "comment_id": 60425525, "body": "This has been solved here: <a href=\"http://stackoverflow.com/questions/13613754/how-do-you-set-a-value-to-null-with-org-json-jsonobject-in-java\" title=\"how do you set a value to null with org json jsonobject in java\">stackoverflow.com/questions/13613754/&hellip;</a> Hope it helps"}], "answers": [{"score": 0, "last_activity_date": 1459777905, "last_edit_date": 1495539906, "answer_id": 36404595, "question_id": 36404532, "body": "<p>Try using <code>JSONObject.NULL</code></p>\n\n<p>reference: \n<a href=\"http://developer.android.com/reference/org/json/JSONObject.html#NULL\" rel=\"nofollow noreferrer\">http://developer.android.com/reference/org/json/JSONObject.html#NULL</a>\n<a href=\"https://stackoverflow.com/questions/13613754/how-do-you-set-a-value-to-null-with-org-json-jsonobject-in-java\">How do you set a value to null with org.json.JSONObject in java?</a></p>\n"}, {"comments": [{"score": 0, "creation_date": 1459778178, "post_id": 36404621, "comment_id": 60425605, "body": "how about validity date?"}, {"score": 0, "creation_date": 1459778195, "post_id": 36404621, "comment_id": 60425620, "body": "it has to be set as null too"}, {"score": 0, "creation_date": 1459778214, "post_id": 36404621, "comment_id": 60425633, "body": "innerJson.put(&quot;validity_date&quot;, mValidityDate.getText().toString()); where the edit text is of null"}, {"score": 0, "creation_date": 1459778241, "post_id": 36404621, "comment_id": 60425654, "body": "@user1241241 does it ever happen that validaty_date is not <code>null</code>? Is there any condition or is it always <code>null</code>?"}, {"score": 0, "creation_date": 1459778372, "post_id": 36404621, "comment_id": 60425755, "body": "sometimes validity_date might have &quot;null&quot;"}, {"score": 0, "creation_date": 1459778444, "post_id": 36404621, "comment_id": 60425806, "body": "@user1241241 updated the code with validity_date included. Also included <code>JSONObject.NULL</code> by suggestion of @ferdy182"}, {"score": 0, "creation_date": 1459779637, "post_id": 36404621, "comment_id": 60426616, "body": "im checking it as follows, `            innerJson.put(&quot;validity_date&quot;, mValidityDate.getText().toString().equals(&quot;null&quot;) ? JSONObject.NULL : mValidityDate.getText().toString()); `"}, {"score": 0, "creation_date": 1459779661, "post_id": 36404621, "comment_id": 60426638, "body": "because it will contain a string &quot;null&quot; but my app crashed while doing so"}, {"score": 0, "creation_date": 1459780042, "post_id": 36404621, "comment_id": 60426909, "body": "@user1241241 Like I said, I updated my answer above with new code where validity_date will also contain null when it&#39;s empty. Use that code."}], "score": 0, "last_activity_date": 1459778430, "last_edit_date": 1459778430, "answer_id": 36404621, "question_id": 36404532, "body": "<p><code>docArray.length &gt; 0 ? docArray : null</code> evaluates the length of <code>docArray</code>. If it's length is greater than 0 (aka, it contains items), it will put the array as the content of <code>documents</code>. Otherwise it will put <code>null</code>.</p>\n\n<p>Same thing for <code>validity_date</code>. <code>isEmpty()</code> checks for <code>null</code> or <code>\"\"</code> and if that's the case, <code>null</code> will be used in stead of the actual value of <code>mValidityDate.getText()</code>.</p>\n\n<pre><code>private JSONArray getJsonArray(String encodedString) {\n    JSONArray docArray = new JSONArray();\n\n    JSONObject innerJson = new JSONObject();\n    JSONArray innerJsonArray = new JSONArray();\n    JSONObject inJobj = new JSONObject();\n    JSONArray outerJsonArray = new JSONArray();\n    SharedPreferences userDetails = getSharedPreferences(\"userdetails\", Context.MODE_PRIVATE);\n    String session = userDetails.getString(\"session\", \"\");\n\n    try {\n        innerJson.put(\"compliance_history_id\", 23);\n\n        innerJson.put(\"documents\", docArray.length &gt; 0 ? docArray : JSONObject.NULL);\n        innerJson.put(\"completion_date\", \"04-Apr-2016\");\n\n        String validityDate = mValidityDate.getText().toString();\n        innerJson.put(\"validity_date\", validityDate.isEmpty() ? JSONObject.NULL : validityDate.toString());\n        innerJson.put(\"next_due_date\", mNextDueDate.getText().toString());\n        innerJson.put(\"remarks\", mRemarks.getText().toString());\n\n        innerJsonArray.put(\"UpdateComplianceDetail\");\n        innerJsonArray.put(innerJson);\n\n        inJobj.put(\"session_token\", session);\n        inJobj.put(\"request\", innerJsonArray);\n\n        outerJsonArray.put(session);\n        outerJsonArray.put(inJobj);\n\n    } catch (JSONException e) {\n        e.printStackTrace();\n    }\n\n    return outerJsonArray;\n}\n</code></pre>\n"}], "is_answered": true, "answer_count": 2, "score": 0, "last_activity_date": 1459778430, "creation_date": 1459777733, "question_id": 36404532, "title": "Json array is not of proper format", "body": "<p>Im trying to frame a json array of following form</p>\n\n<pre><code>[\n  \"1-35e03ac0b6ba442bb0d5fab3faef32fe\",\n  {\n    \"request\": [\n      \"UpdateComplianceDetail\",\n      {\n        \"remarks\": \"Remarks\",\n        \"next_due_date\": \"27-Mar-2016\",\n        \"completion_date\": \"04-Apr-2016\",\n        \"validity_date\": null,\n        \"documents\": null,\n        \"compliance_history_id\": 23\n      }\n    ],\n    \"session_token\": \"1-35e03ac0b6ba442bb0d5fab3faef32fe\"\n  }\n]\n</code></pre>\n\n<p>Following is my code that i use to create json of above structure,</p>\n\n<pre><code>private JSONArray getJsonArray(String encodedString) {\n        JSONArray docArray = new JSONArray();\n\n        JSONObject innerJson = new JSONObject();\n        JSONArray innerJsonArray = new JSONArray();\n        JSONObject inJobj = new JSONObject();\n        JSONArray outerJsonArray = new JSONArray();\n        SharedPreferences userDetails = getSharedPreferences(\"userdetails\", Context.MODE_PRIVATE);\n        String session = userDetails.getString(\"session\", \"\");\n\n        try {\n            innerJson.put(\"compliance_history_id\", 23);\n\n            docArray.put(\"null\");\n\n            innerJson.put(\"documents\", docArray);\n            innerJson.put(\"completion_date\", \"04-Apr-2016\");\n            innerJson.put(\"validity_date\", mValidityDate.getText().toString());\n            innerJson.put(\"next_due_date\", mNextDueDate.getText().toString());\n            innerJson.put(\"remarks\", mRemarks.getText().toString());\n\n            innerJsonArray.put(\"UpdateComplianceDetail\");\n            innerJsonArray.put(innerJson);\n\n            inJobj.put(\"session_token\", session);\n            inJobj.put(\"request\", innerJsonArray);\n\n            outerJsonArray.put(session);\n            outerJsonArray.put(inJobj);\n\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n\n        return outerJsonArray;\n    }\n</code></pre>\n\n<p>Following is the json that my code is creating,</p>\n\n<pre><code> [\n  \"1-35e03ac0b6ba442bb0d5fab3faef32fe\",\n  {\n    \"request\": [\n      \"UpdateComplianceDetail\",\n      {\n        \"remarks\": \"Remarks\",\n        \"next_due_date\": \"27-Mar-2016\",\n        \"completion_date\": \"04-Apr-2016\",\n        \"validity_date\": \"null\",\n        \"documents\": [\n          \"null\"\n        ],\n        \"compliance_history_id\": 23\n      }\n    ],\n    \"session_token\": \"1-35e03ac0b6ba442bb0d5fab3faef32fe\"\n  }\n]\n</code></pre>\n\n<p>How can I be able to sort this out? I have put \"null\" within json array but its being recognised as a string and not as a null. also validity_date has to be null but it is a string \"null\"</p>\n"}