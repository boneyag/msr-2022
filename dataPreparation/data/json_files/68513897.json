{"tags": ["python", "json"], "comments": [{"score": 0, "creation_date": 1627162708, "post_id": 68513897, "comment_id": 121084436, "body": "what is wrong with your current code? not working or any error?"}], "answers": [{"score": 1, "last_activity_date": 1627163895, "last_edit_date": 1627163895, "answer_id": 68514023, "question_id": 68513897, "body": "<p>It is taking STATE.append(state) as West Bengal for all iterations. But the data you are pulling up is for all the states. So this makes State Column to be West Bengal for all the rows.</p>\n<p>If you want to pull data for all states, then use</p>\n<pre><code>    STATE.append(k)\n</code></pre>\n<p>this will give you the state code, instead of West Bengal in all rows.</p>\n<p>code for getting West Bengal's data alone:</p>\n<pre><code>import json\nimport requests\nimport pandas as pd\n\ncurrent_day_numbers = requests.get('https://api.covid19india.org/v4/min/data.min.json')\ncurrent_day_numbers = json.loads(current_day_numbers.text)\n\nstate='Tamil Nadu'\nDATE = []\nSTATE = []\nCONFIRMED = []\nDECEASED = []\nRECOVERED = []\nTESTED = []\nVACCINATED1 = []\nVACCINATED2 = []\n\n\nDATE.append(current_day_numbers['WB'][&quot;meta&quot;][&quot;date&quot;])\nSTATE.append('West Bengal')\nCONFIRMED.append(current_day_numbers['WB'][&quot;total&quot;][&quot;confirmed&quot;])\nDECEASED.append(current_day_numbers['WB'][&quot;total&quot;][&quot;deceased&quot;])\nRECOVERED.append(current_day_numbers['WB'][&quot;total&quot;][&quot;recovered&quot;])\nTESTED.append(current_day_numbers['WB'][&quot;total&quot;][&quot;tested&quot;])\nVACCINATED1.append(current_day_numbers['WB'][&quot;total&quot;][&quot;vaccinated1&quot;])\nVACCINATED2.append(current_day_numbers['WB'][&quot;total&quot;][&quot;vaccinated2&quot;])\n\ndata = pd.DataFrame({'DATE':DATE,'STATE':STATE, 'CONFIRMED':CONFIRMED, 'DECEASED': DECEASED, 'RECOVERED':RECOVERED, 'TESTED':TESTED, \n                     'VACCINATED1':VACCINATED1, 'VACCINATED2':VACCINATED2})\n</code></pre>\n<p>Please comment if it is ok</p>\n"}, {"score": 1, "last_activity_date": 1627163066, "answer_id": 68514024, "question_id": 68513897, "body": "<p>I think this fixes the problem - it's very similar to your code I've just tried to make the parsing logic clearer by iterating through the data per state.</p>\n<p>When you are iterating over the current_day_numbers.items() dictionary, you used state as an undefined variable which I think is what is causing the duplicate. Your code actually throws an error since this is undefined so I think that's making something go wrong.</p>\n<pre><code>import requests\nimport pandas as pd\n\nresponse = requests.get(&quot;https://api.covid19india.org/v4/min/data.min.json&quot;)\nif response.status_code == 200:\n    current_day_numbers = response.json()\n    DATE = []\n    STATE = []\n    CONFIRMED = []\n    DECEASED = []\n    RECOVERED = []\n    TESTED = []\n    VACCINATED1 = []\n    VACCINATED2 = []\n\n    for state in current_day_numbers.keys():\n        DATE.append(current_day_numbers[state][&quot;meta&quot;][&quot;date&quot;])\n        STATE.append(state)\n        CONFIRMED.append(current_day_numbers[state][&quot;total&quot;][&quot;confirmed&quot;])\n        DECEASED.append(current_day_numbers[state][&quot;total&quot;][&quot;deceased&quot;])\n        RECOVERED.append(current_day_numbers[state][&quot;total&quot;][&quot;recovered&quot;])\n        TESTED.append(current_day_numbers[state][&quot;total&quot;][&quot;tested&quot;])\n        VACCINATED1.append(current_day_numbers[state][&quot;total&quot;][&quot;vaccinated1&quot;])\n        VACCINATED2.append(current_day_numbers[state][&quot;total&quot;][&quot;vaccinated2&quot;])\n\n    data = pd.DataFrame(\n        {\n            &quot;DATE&quot;: DATE,\n            &quot;STATE&quot;: STATE,\n            &quot;CONFIRMED&quot;: CONFIRMED,\n            &quot;DECEASED&quot;: DECEASED,\n            &quot;RECOVERED&quot;: RECOVERED,\n            &quot;TESTED&quot;: TESTED,\n            &quot;VACCINATED1&quot;: VACCINATED1,\n            &quot;VACCINATED2&quot;: VACCINATED2,\n        }\n    )\n    print(data.head())\n\nelse:\n    print(&quot;Error while calling API: {}&quot;.format(response.status_code, response.reason))\n</code></pre>\n"}], "is_answered": true, "answer_count": 2, "score": -1, "last_activity_date": 1627163895, "creation_date": 1627161713, "question_id": 68513897, "title": "How to load data from covid19 api jason file using python", "body": "<p>Iam very new to handling json files. So sorry if I sound very naive.</p>\n<p>Was trying to load data from the link:\n<a href=\"https://api.covid19india.org/v4/min/data.min.json\" rel=\"nofollow noreferrer\">COvid19.api</a> and I wanted to get the total daywise cases with details such as date, state, confirmed, deceased, recovered, tested, vaccinated1, vaccinated2.</p>\n<p>But, when I pull the data I see duplcate dates repeating from each state. Not sure if I am understanding the structure right.</p>\n<p>Data structure link: <a href=\"https://api.covid19india.org/documentation/v4_data.html\" rel=\"nofollow noreferrer\">json structure</a></p>\n<p><strong>My input data</strong> :</p>\n<pre><code>data.head()\n   DATE          STATE  CONFIRMED   DECEASED    RECOVERED   TESTED  VACCINATED1 VACCINATED2\n0   2021-07-24  West Bengal 7525    129 7382    430415  190153  85236\n1   2021-07-24  West Bengal 1952513 13241   1916914 24050103    14871913    4601809\n2   2021-07-24  West Bengal 45703   213 41025   898083  650132  156649\n3   2021-07-24  West Bengal 557437  5114    536597  17774829    7851373 1683402\n4   2021-07-24  West Bengal 724390  9637    714223  36305828    18386444    3329911\n</code></pre>\n<p>Need help in understanding the structure and how to read the daily statewise data(district too if possible) .</p>\n<p><strong>My code as of now</strong></p>\n<pre><code>import json\nimport requests\nimport pandas as pd\n\ncurrent_day_numbers = requests.get('https://api.covid19india.org/v4/min/data.min.json')\ncurrent_day_numbers = json.loads(current_day_numbers.text)\n\nDATE = []\nSTATE = []\nCONFIRMED = []\nDECEASED = []\nRECOVERED = []\nTESTED = []\nVACCINATED1 = []\nVACCINATED2 = []\n\n\nfor k,v in current_day_numbers.items():\n            DATE.append(v[&quot;meta&quot;][&quot;date&quot;])\n            STATE.append(state)\n            CONFIRMED.append(v[&quot;total&quot;][&quot;confirmed&quot;])\n            DECEASED.append(v[&quot;total&quot;][&quot;deceased&quot;])\n            RECOVERED.append(v[&quot;total&quot;][&quot;recovered&quot;])\n            TESTED.append(v[&quot;total&quot;][&quot;tested&quot;])\n            VACCINATED1.append(v[&quot;total&quot;][&quot;vaccinated1&quot;])\n            VACCINATED2.append(v[&quot;total&quot;][&quot;vaccinated2&quot;])\n\ndata = pd.DataFrame({'DATE':DATE,'STATE':STATE, 'CONFIRMED':CONFIRMED, 'DECEASED': DECEASED, 'RECOVERED':RECOVERED, 'TESTED':TESTED, \n                     'VACCINATED1':VACCINATED1, 'VACCINATED2':VACCINATED2})\n</code></pre>\n"}