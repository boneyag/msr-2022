{"tags": ["javascript", "json", "amazon-web-services", "amazon-s3", "cors"], "comments": [{"score": 1, "creation_date": 1626725982, "post_id": 68445282, "comment_id": 120966124, "body": "Note that we prefer a technical style of writing here. We gently discourage greetings, hope-you-can-helps, thanks, advance thanks, notes of appreciation, regards, kind regards, signatures, please-can-you-helps, chatty material and abbreviated txtspk, pleading, how long you&#39;ve been stuck, voting advice, meta commentary, etc. Just explain your problem, and show what you&#39;ve tried, what you expected, and what actually happened."}, {"score": 0, "creation_date": 1626729365, "post_id": 68445282, "comment_id": 120967177, "body": "Have you tried without the &quot;/&quot; in the <code>AllowedOrigins</code>? Like: <code>http:&#47;&#47;localhost:7887</code> instead of <code>http:&#47;&#47;localhost:7887&#47;</code>?"}, {"score": 0, "creation_date": 1626729671, "post_id": 68445282, "comment_id": 120967264, "body": "And it also seems that your file is not a valid json as well, it starts with <code>var sf_events = </code>"}], "answers": [{"score": 0, "last_activity_date": 1626729146, "last_edit_date": 1626729146, "answer_id": 68447020, "question_id": 68445282, "body": "<p>I guess Fetch might initiate a &quot;PreFlight&quot;... So &quot;OPTIONS&quot; Http Method might have to be enabled.</p>\n<p><a href=\"https://javascript.info/fetch-crossorigin\" rel=\"nofollow noreferrer\">Check this link</a></p>\n<p>Try adding &quot;OPTIONS&quot; along with &quot;GET&quot;...</p>\n<p>and if/when you have it working, do clean up the policy to restrict to only whats necessary, and cross check on other settings you might have done which was probably non needed, specifically security/access related.</p>\n"}], "is_answered": false, "answer_count": 1, "score": -1, "last_activity_date": 1626729146, "creation_date": 1626718887, "question_id": 68445282, "title": "No &#39;Access-Control-Allow-Origin&#39; error when reading in JSON from S3 Bucket in JavaScript", "body": "<p>I have a web app built in JavaScript that loads in data from a JSON file. I'm trying to read in this JSON that I have on an S3 bucket (the JSON is updated daily), using this function:</p>\n<pre><code>const url = `https://s3.us-east-2.amazonaws.com/sfbucket.starr/sf_events.json`;\n\n\nconst successCb = (resp) =&gt; {\n    console.log(resp);\n};\n\nconst errorCb = (err) =&gt; {\n    console.error('Error - ', err);\n};\n\nfunction downloadObject(url, successCb, errorCb) {\n    fetch(url)\n      .then(response =&gt; response.json())\n      .then(successCb)\n      .catch(errorCb);\n}\n\ndownloadObject(url, successCb, errorCb);\n</code></pre>\n<p>I'm getting this error:</p>\n<pre><code>Access to fetch at 'https://s3.us-east-2.amazonaws.com/sfbucket.starr/sf_events.json' from origin 'http://localhost:7887' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.\n</code></pre>\n<p>The website is already deployed, but I'm testing this on <code>http://localhost:7887/</code></p>\n<p><strong>Things I've tried:</strong></p>\n<ol>\n<li><p>I've made the S3 bucket public.</p>\n</li>\n<li><p>I've read that I may need to edit the CORS configuration in the S3 bucket. So, I did this CORS configuration:</p>\n<pre><code>     [\n {\n     &quot;AllowedHeaders&quot;: [\n         &quot;*&quot;\n     ],\n     &quot;AllowedMethods&quot;: [\n         &quot;PUT&quot;,\n         &quot;POST&quot;,\n         &quot;DELETE&quot;\n     ],\n     &quot;AllowedOrigins&quot;: [\n         &quot;http://www.example1.com&quot;\n     ],\n     &quot;ExposeHeaders&quot;: []\n },\n {\n     &quot;AllowedHeaders&quot;: [\n         &quot;*&quot;\n     ],\n     &quot;AllowedMethods&quot;: [\n         &quot;PUT&quot;,\n         &quot;POST&quot;,\n         &quot;DELETE&quot;\n     ],\n     &quot;AllowedOrigins&quot;: [\n         &quot;http://localhost:7887/&quot;\n     ],\n     &quot;ExposeHeaders&quot;: []\n },\n {\n     &quot;AllowedHeaders&quot;: [],\n     &quot;AllowedMethods&quot;: [\n         &quot;GET&quot;\n     ],\n     &quot;AllowedOrigins&quot;: [\n         &quot;*&quot;\n     ],\n     &quot;ExposeHeaders&quot;: []\n }\n</code></pre>\n<p>]</p>\n</li>\n</ol>\n<p>What can I try to resolve this?</p>\n"}