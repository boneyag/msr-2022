{"tags": ["php", "html", "json", "webpack"], "answers": [{"comments": [{"score": 0, "creation_date": 1624794196, "post_id": 57810590, "comment_id": 120449532, "body": "How can i use this script to generate link tags for css files and script tags for .js files?"}, {"score": 0, "creation_date": 1624887445, "post_id": 57810590, "comment_id": 120472561, "body": "@Gy&#246;rgyKom&#225;romi answer already contain example for css files"}, {"score": 1, "creation_date": 1627640302, "post_id": 57810590, "comment_id": 121215840, "body": "@Komi in solving a similar issue I have split the array in two parts: one with the files with the <code>.css</code> extension and another with the <code>.js</code> extension. I am then looping the two arrays in separate parts of the html and printing <code>&lt;link&gt;</code> tags for <code>.css</code> and <code>&lt;script&gt;</code> tags for <code>.js</code>"}], "score": 6, "last_activity_date": 1567705236, "answer_id": 57810590, "question_id": 57810259, "body": "<p>Use that function in php script</p>\n\n<pre><code>function asset($asset_name)\n{\n    $manifest = file_get_contents(\"./manifest.json\");\n    $manifest = json_decode($manifest, true); //decode json string to php associative array\n    if (!isset($manifest[$asset_name])) return $asset_name; //if manifest.json doesn't contain $asset_name then return $asset_name itself\n    return \"/dist/\" . $manifest[$asset_name];\n}\n</code></pre>\n\n<p>It will read and parse <code>manifest.json</code> and replace <code>\"main.js\"</code> with <code>\"css.d915ef.js\"</code>\nYou can use <code>asset()</code> function while generating yout html, like this:</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"&lt;?php echo asset(\"main.js\"); ?&gt;\"&gt;\n</code></pre>\n\n<p>Please, be aware, that <code>file_get_contents(\"./manifest.json\")</code> will only work correctly if your php script and <code>manifest.json</code> is in the same folder. If not - you need to provide correct path to <code>manifest.json</code> here.</p>\n"}, {"comments": [{"score": 0, "creation_date": 1627632755, "post_id": 57810658, "comment_id": 121212893, "body": "This solves the issue but creates a problem if you want to implement cache busting"}], "score": 0, "last_activity_date": 1567705568, "answer_id": 57810658, "question_id": 57810259, "body": "<p>Another option is to disable <code>hash</code> inserting via <code>webpack.config.js</code> file.</p>\n\n<p>You need to find all <code>[hash]</code> occurence and remove it from <code>webpack.config.js</code>. Then use <code>npm run</code> to recompile everything.</p>\n\n<p>For example, you have</p>\n\n<pre><code>output: {\n           path: path.resolve(__dirname, './public/'),\n           filename: '[name].[hash].js'\n        }\n</code></pre>\n\n<p>Replace it with:</p>\n\n<pre><code>output: {\n           path: path.resolve(__dirname, './public/'),\n           filename: '[name].js'\n        }\n</code></pre>\n"}, {"score": 0, "last_activity_date": 1627641053, "answer_id": 68589475, "question_id": 57810259, "body": "<p>I have a similar situation with Create React App and a PHP file.</p>\n<p>The Create React App configuration creates an <code>asset-manifest.json</code> file in which all the files that are needed in the page are listed under the <code>entrypoints</code> key.</p>\n<pre><code>&quot;entrypoints&quot;: [\n  &quot;static/js/runtime-main.bff00530.js&quot;,\n  &quot;static/js/2.8bab6741.chunk.js&quot;,\n  &quot;static/css/main.262e5e5f.chunk.css&quot;,\n  &quot;static/js/main.e2f4dbf8.chunk.js&quot;\n]\n</code></pre>\n<p>In my code I'm doing the following (expanding on <a href=\"https://stackoverflow.com/users/8027397/krylov123\">@krylov123</a>'s <a href=\"https://stackoverflow.com/a/57810590/\">answer</a>):</p>\n<pre class=\"lang-php prettyprint-override\"><code>// get the original values\n$manifest = file_get_contents(&quot;./asset-manifest.json&quot;);\n$manifest_values = json_decode($manifest, true);\n$entrypoints = $manifest_values['entrypoints'];\n</code></pre>\n<p>Then I'm creating two separate arrays: one for the css and another for the js files. In order to do so I've created an helper function <code>filterPaths</code> (you may create your own):</p>\n<pre class=\"lang-php prettyprint-override\"><code>// return only paths continaint a specific string\nfunction filterPaths($paths, $value): array {\n  return array_filter($paths, function ($filename) use ($value): bool {\n    return strpos($filename, $value) !== false;\n  });\n}\n</code></pre>\n<p>Here I create the two arrays:</p>\n<pre class=\"lang-php prettyprint-override\"><code>// filter '.css' files\n$css_files = filterPaths($entrypoints, '/css/');\n// filter '.js' files\n$js_files = filterPaths($entrypoints, '/js/');\n</code></pre>\n<p>Then in the html part I loop over the two arrays in order to print <code>link</code> tags for CSS and <code>script</code> tags for JavaScript.</p>\n<p>This is the syntax using blade, but you can adapt it to normal php:</p>\n<pre><code>@foreach($css_files as $link)\n  &lt;link href=&quot;{{ $link }}&quot; rel=&quot;stylesheet&quot;&gt;\n@endforeach\n</code></pre>\n<pre><code>@foreach($js_files as $link)\n  &lt;script src=&quot;{{ $link }}&quot;&gt;&lt;/script&gt;\n@endforeach\n</code></pre>\n"}], "is_answered": true, "answer_count": 3, "score": 4, "last_activity_date": 1627641053, "creation_date": 1567703856, "question_id": 57810259, "title": "How to link something from manifest.json", "body": "<p>I'm using Webpack with the CleanWebpackPlugin, but I use an index.php. So HtmlWebpackPlugin isn't an option. I found a different plugin called WebpackManifestPlugin. This creates a file with the files and their hash called manifest.json. It looks like this: </p>\n\n<p><code>{\n  \"main.js\": \"css.d915ef.js\",\n  \"main.css\": \"main.d915ef.css\"\n}</code> </p>\n\n<p>But how do I use this in my head?</p>\n\n<p><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"dist/main.css\"&gt;</code></p>\n\n<p>Because this doesn't work.</p>\n"}