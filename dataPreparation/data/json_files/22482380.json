{"tags": ["django", "celery", "django-celery"], "answers": [{"score": 1, "last_activity_date": 1395155438, "answer_id": 22483413, "question_id": 22482380, "body": "<p>The reason why celery raised a SystemExit exception is because celery restarted.</p>\n\n<p>From the log:</p>\n\n<pre><code>Restarting celery worker (./manage.py celeryd)\n</code></pre>\n\n<p>And the reason why celery restarted is because it was initially started over ssh, and it got killed when ssh user disconnected.</p>\n"}], "is_answered": true, "answer_count": 1, "score": 2, "last_activity_date": 1395155438, "creation_date": 1395153027, "question_id": 22482380, "title": "Django celery random raise SystemExit", "body": "<p>I have a celery task that handles copying large files (30 GB). The function looks like this:</p>\n\n<pre><code>def copy(self, src, dest):\n        self.execute('cp %s %s &amp;' % (src, dest))\n        while self.get_file_size(src) != self.get_file_size(dest):\n            time.sleep(3)\n</code></pre>\n\n<p>Now it seems that celery randomly (sometime it happens after 1 min sometime 15 min) raise a SystemExit execption with the following traceback:</p>\n\n<pre><code>Traceback (most recent call last):\n File \"/some/path/tasks.py\", line 51, in create_vm\n   vm.create()\n File \"/some/path/models.py\", line 115, in create\n   self.server.copy(self.template_path, self.vdi_path)\n File \"/some/path/models.py\", line 451, in copy\n   time.sleep(3)\n File \"/usr/local/lib/python2.7/dist-packages/billiard/common.py\", line 95, in _shutdown_cleanup\n   sys.exit(-(256 - signum))\n File \"/usr/local/lib/python2.7/dist-packages/billiard/pool.py\", line 279, in exit\n   return _exit()\nSystemExit\n</code></pre>\n\n<p>What can cause celery to raise such an exception? </p>\n"}