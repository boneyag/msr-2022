{"tags": ["r", "regex", "dplyr"], "answers": [{"comments": [{"score": 1, "creation_date": 1622057634, "post_id": 67711541, "comment_id": 119684031, "body": "Worked! Thanks so much!"}, {"score": 0, "creation_date": 1622105873, "post_id": 67711541, "comment_id": 119696668, "body": "@AamashHaroon Glad it worked for you. Please consider accepting the answer by clicking \u2713 on the left (see <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">How to accept SO answers</a>) and upvoting if my answer proved helpful to you (see <a href=\"http://meta.stackexchange.com/questions/173399/how-to-upvote-on-stack-overflow\">How to upvote on Stack Overflow?</a>)."}], "score": 2, "last_activity_date": 1622057871, "last_edit_date": 1622057871, "answer_id": 67711541, "question_id": 67711514, "body": "<p>You can use</p>\n<pre class=\"lang-r prettyprint-override\"><code>str_extract(notes, &quot;(?i)\\\\b(?:lot|unit)\\\\W*\\\\d+&quot;)\n</code></pre>\n<p>See the <a href=\"https://regex101.com/r/dA9WnC/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n<p><em>Details</em></p>\n<ul>\n<li><code>(?i)</code> - case insensitive flag</li>\n<li><code>\\b</code>  - a word boundary</li>\n<li><code>(?:lot|unit)</code> - either <code>lot</code> or <code>unit</code></li>\n<li><code>\\W*</code> - any zero or more non-word chars</li>\n<li><code>\\d+</code> - one or more digits.</li>\n</ul>\n<p>R test:</p>\n<pre class=\"lang-r prettyprint-override\"><code>library(dplyr)\nlibrary(stringr)\ndf &lt;- data.frame(notes=c(&quot;LOT 56, STRATA TITLE, 56/SP77100,&quot;,&quot;18/SP71866, COMMERCIAL, 17/SP71866, lot 18&quot;,&quot;unit 9; 3R/PS732002&quot;, &quot;V1602 F63, Section 8 Block 68 Unit 3&quot;))\ndf %&gt;% \n+   mutate(extract = str_extract(notes, &quot;(?i)\\\\b(?:lot|unit)\\\\W*\\\\d+&quot;))\n                                       notes extract\n1          LOT 56, STRATA TITLE, 56/SP77100,  LOT 56\n2 18/SP71866, COMMERCIAL, 17/SP71866, lot 18  lot 18\n3                        unit 9; 3R/PS732002  unit 9\n4       V1602 F63, Section 8 Block 68 Unit 3  Unit 3\n</code></pre>\n"}, {"score": 0, "last_activity_date": 1622057910, "answer_id": 67711661, "question_id": 67711514, "body": "<p>A base R option using <code>regmatches</code></p>\n<pre><code>transform(\n  df,\n  extract = unlist(regmatches(notes, gregexpr(&quot;\\\\b(lot|unit)\\\\s\\\\d+&quot;, notes, ignore.case = TRUE)))\n)\n</code></pre>\n<p>gives</p>\n<pre><code>  id                                      notes extract\n1  1           LOT 56, STRATA TITLE, 56/SP77100  LOT 56\n2  2 18/SP71866, COMMERCIAL, 17/SP71866, lot 18  lot 18\n3  3                        unit 9; 3R/PS732002  unit 9\n4  4       V1602 F63, Section 8 Block 68 Unit 3  Unit 3\n</code></pre>\n<h1>Data</h1>\n<pre><code>&gt; dput(df)\nstructure(list(id = 1:4, notes = c(&quot;LOT 56, STRATA TITLE, 56/SP77100&quot;, \n&quot;18/SP71866, COMMERCIAL, 17/SP71866, lot 18&quot;, &quot;unit 9; 3R/PS732002&quot;,\n&quot;V1602 F63, Section 8 Block 68 Unit 3&quot;)), class = &quot;data.frame&quot;, row.names = c(NA,\n-4L))\n</code></pre>\n"}], "is_answered": true, "answer_count": 2, "score": 1, "last_activity_date": 1622057910, "creation_date": 1622057235, "question_id": 67711514, "title": "R-- Extract specific text and the subsequent text/numbers", "body": "<p>I have a column with text strings in it, and I would like to extract not just a specific string, but also the string or number/s following this specified string. What is a good solution for this?</p>\n<p>In the example below- I would like to create a column &quot;extract&quot; and <code>str_extract</code> the words &quot;lot&quot; and &quot;unit&quot; AND also extract the subsequent numbers following this text.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">id</th>\n<th style=\"text-align: center;\">notes</th>\n<th style=\"text-align: right;\">extract</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">1</td>\n<td style=\"text-align: center;\">LOT 56, STRATA TITLE, 56/SP77100,</td>\n<td style=\"text-align: right;\">LOT 56</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">2</td>\n<td style=\"text-align: center;\">18/SP71866, COMMERCIAL, 17/SP71866, lot 18</td>\n<td style=\"text-align: right;\">lot 18</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">3</td>\n<td style=\"text-align: center;\">unit 9; 3R/PS732002</td>\n<td style=\"text-align: right;\">unit 9</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">4</td>\n<td style=\"text-align: center;\">V1602 F63, Section 8 Block 68 Unit 3</td>\n<td style=\"text-align: right;\">Unit 3</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Have looked at a lot of regex code but nothing helpful to find how to extract subsequent values from the specified target text string.</p>\n<p>Tried this so far from another StackOverflow problem-</p>\n<pre><code> result &lt;- table %&gt;% \n  mutate(extract = str_extract(notes, &quot;(?lot\\\\s)\\\\W\\\\s?\\\\d+\\\\&quot;)) %&gt;%\n  mutate(lot = str_squish(lot)) \n</code></pre>\n"}