{"tags": ["php", "regex"], "comments": [{"score": 0, "creation_date": 1396556450, "post_id": 22848141, "comment_id": 34854345, "body": "What exactly are you trying to do?"}, {"score": 0, "creation_date": 1396556487, "post_id": 22848141, "comment_id": 34854376, "body": "@anubhava I am trying to clean a uri that is typed into the browser"}, {"score": 1, "creation_date": 1396556538, "post_id": 22848141, "comment_id": 34854415, "body": "Use <code>preg_quote</code> for escaping."}, {"score": 0, "creation_date": 1396557030, "post_id": 22848141, "comment_id": 34854653, "body": "Move  $uriPath = htmlentities($uriPath); after $uriPath = preg_replace($patterns, &#39;&#39;, $uriPath); line  .  Because htmlentites function escape chars your preg replace cant remove chars. If u move it after preg replace line. Its working"}, {"score": 0, "creation_date": 1396557059, "post_id": 22848141, "comment_id": 34854667, "body": "&quot;typed into the browser&quot; \u2013 just use javascript."}, {"score": 0, "creation_date": 1396557962, "post_id": 22848141, "comment_id": 34855182, "body": "@PouyaDarabi unfortunately that did not work."}, {"score": 0, "creation_date": 1396560117, "post_id": 22848141, "comment_id": 34856412, "body": "I test it . It work . Echo output after preg_replace and see output. Also u can remove htmlentites because html chars after preg_replace removing and u dont need that."}], "answers": [{"score": 0, "last_activity_date": 1396559832, "answer_id": 22849198, "question_id": 22848141, "body": "<p>I ended up using <code>rawurldecode()</code> on the path and that made everything work as expected. This is because it converts things like <code>%20</code> back to a space.</p>\n"}], "is_answered": true, "answer_count": 1, "score": 0, "last_activity_date": 1396559832, "creation_date": 1396556361, "question_id": 22848141, "title": "php regex replacing with number and character not null", "body": "<p>I am trying to escape everything from the uri except letters, numbers, -, and /, so I made the regex below and put it into a <code>preg_replace</code> function. But if I type something like <code>/dir/anotherDir&lt;?&lt;&lt;&lt;?&gt;</code> it doesn't remove it to null it replaces the greater than and less than with <code>3C</code> and <code>3E</code> how can I fix this?</p>\n\n<pre><code>$uriPath = htmlentities($uriPath);\n\n$patterns = array('/[^a-zA-Z0-9\\.\\-\\/]/', '/\\.+/', '/\\.+\\//', '/\\.+\\.+\\//');\n\n$uriPath = preg_replace($patterns, '', $uriPath);\n</code></pre>\n"}